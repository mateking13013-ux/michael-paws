---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHeader from '../components/PageHeader.astro';

const puppyNames = ["Alex", "Ashley", "Bella", "Belly", "Boston", "Carlos", "Chill", "Connie", "Cooper", "Coy", "Echo", "Gracie", "Kobe", "Lucy", "Mabel", "Mack", "Maggie", "Mia", "Nevile", "Pip", "Rex", "Roy", "Royce", "Thor", "Wild", "Yava", "Zeus", "Ziggy", "Lime"];
---

<BaseLayout
  title="Sales Agreement | Michael Paws"
  description="Review and sign our Staffordshire Bull Terrier puppy sales agreement. Michael Paws — premium Staffie breeder."
  keywords="puppy sales agreement, Staffordshire Bull Terrier purchase contract, breeder contract, michael paws"
>
  <PageHeader
    title="Sales Agreement"
    subtitle="Staffordshire Bull Terrier Puppy Sales Agreement — Michael Paws"
  />

  <section class="agreement-section">
    <div class="agreement-container">

      <div class="agreement-intro">
        <h2>Michael Paws Staffordshire Bull Terrier Puppy Sales Agreement</h2>
        <p>Please review the terms below and complete the form to sign our sales agreement. This contract is between <strong>Michael Paws</strong> (referred to as the Seller) and the Buyer identified below.</p>
      </div>

      <!-- Agreement Terms -->
      <div class="terms-card">
        <h3>1. Health and Wellness Guarantee</h3>
        <p>The Breeder ensures the puppy is in excellent health at the time of adoption and is up-to-date on all necessary vaccinations and deworming treatments. The Breeder provides the following comprehensive health and wellness guarantee:</p>

        <div class="term-item">
          <strong>a. Veterinary Examination:</strong> The Buyer must take the puppy to a licensed veterinarian for a thorough checkup within seven (7) days of receiving the puppy. If the veterinarian identifies any underlying illness or serious congenital defect, the Breeder will refund the full adoption fee, including any transportation costs, upon the puppy's return.
        </div>

        <div class="term-item">
          <strong>b. Genetic Health Coverage:</strong> The Breeder guarantees the puppy against hereditary conditions including hip dysplasia, L-2 HGA, and hereditary cataracts for the entirety of the puppy's lifetime. If the puppy is diagnosed with any of these conditions by two (2) licensed veterinarians, the Breeder will either replace the puppy with another of equal value or refund the full adoption fee, including any transportation costs, upon the puppy's return.
        </div>

        <div class="term-item">
          <strong>c. Communicable Diseases:</strong> If the puppy is diagnosed with a communicable disease within the first fourteen (14) days after the Buyer receives the puppy, the Breeder will refund the full adoption fee, including any transportation costs, upon the puppy's return.
        </div>
      </div>

      <div class="terms-card">
        <h3>2. Transportation and Delivery</h3>
        <div class="term-item">
          <strong>a. Shipping:</strong> If the puppy is to be shipped, the Buyer is responsible for all transportation costs. The puppy will be transported via a reputable pet transportation service, and the Buyer will be provided with detailed tracking information.
        </div>
        <div class="term-item">
          <strong>b. Pickup:</strong> If the Buyer is picking up the puppy, a non-refundable deposit of $475 must be paid at the time of this agreement. The remaining balance must be paid in full upon pickup of the puppy.
        </div>
      </div>

      <div class="terms-card">
        <h3>3. Cost and Payment</h3>
        <p>The full adoption fee for the puppy must be paid before the puppy is delivered to the Buyer, either by shipping or pickup. For pickup, a $475 non-refundable deposit is required at the time of this agreement, with the remaining balance due upon pickup of the puppy.</p>
      </div>

      <div class="terms-card">
        <h3>4. Buyer's Responsibilities</h3>
        <p>The Buyer agrees to provide the puppy with proper care, including adequate food, water, shelter, exercise, and regular veterinary check-ups. The Buyer also agrees to comply with all applicable state and local laws regarding dog ownership.</p>
        <p>This agreement constitutes the entire understanding between the parties. Any modifications must be made in writing and signed by both the Breeder and the Buyer.</p>
      </div>

      <!-- Sign Contract Form -->
      <div class="form-card">
        <div class="form-header">
          <h2>Sign Contract</h2>
          <p>Complete the form below to sign our Staffordshire Bull Terrier Puppy Sales Agreement</p>
        </div>

        <form class="agreement-form" id="agreementForm">
          <input type="hidden" name="access_key" value="dbb568ae-a29f-4450-b284-00eb05527be7">
          <input type="hidden" name="subject" value="Sales Agreement Signed - Michael Paws">
          <input type="hidden" name="from_name" value="Michael Paws Sales Agreement">

          <div class="form-group">
            <label for="saleDate">Puppy Sale Contract Date *</label>
            <input type="date" id="saleDate" name="contract_date" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="buyerName">Your Full Name *</label>
              <input type="text" id="buyerName" name="buyer_name" required placeholder="John Doe">
            </div>
            <div class="form-group">
              <label for="buyerPhone">Your Phone Number *</label>
              <input type="tel" id="buyerPhone" name="buyer_phone" required placeholder="(555) 123-4567">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="buyerEmail">Your Email *</label>
              <input type="email" id="buyerEmail" name="buyer_email" required placeholder="you@example.com">
            </div>
            <div class="form-group">
              <label for="buyerState">Your State *</label>
              <input type="text" id="buyerState" name="buyer_state" required placeholder="e.g. California">
            </div>
          </div>

          <div class="form-group">
            <label for="buyerAddress">Your Address *</label>
            <input type="text" id="buyerAddress" name="buyer_address" required placeholder="123 Main St, City, State, ZIP">
          </div>

          <div class="form-group">
            <label>Available Payment Method</label>
            <div class="radio-group">
              <label class="radio-option"><input type="radio" name="payment_method" value="Apple Pay" checked> Apple Pay</label>
              <label class="radio-option"><input type="radio" name="payment_method" value="Zelle"> Zelle</label>
              <label class="radio-option"><input type="radio" name="payment_method" value="CashApp"> CashApp</label>
              <label class="radio-option"><input type="radio" name="payment_method" value="Wire Transfer"> Wire Transfer</label>
            </div>
          </div>

          <div class="form-group">
            <label>Shipping Option</label>
            <div class="radio-group">
              <label class="radio-option"><input type="radio" name="shipping_option" value="Ship To Buyer Airport" checked> Ship To Buyer's Airport (+$250, total $1,050)</label>
              <label class="radio-option"><input type="radio" name="shipping_option" value="In-Person Pickup"> In-Person Pickup</label>
            </div>
          </div>

          <div class="form-group">
            <label>Puppy(s) of Interest *</label>
            <div class="puppy-checkbox-grid">
              {puppyNames.map((name) => (
                <label class="puppy-checkbox">
                  <input type="checkbox" name="puppies" value={name}>
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-label">{name}</span>
                </label>
              ))}
            </div>
          </div>

          <div class="agreement-check">
            <label class="agree-checkbox">
              <input type="checkbox" name="agree_terms" required>
              <span class="checkbox-custom"></span>
              <span>I have read and agree to the Michael Paws Staffordshire Bull Terrier Puppy Sales Agreement, website terms, and conditions.</span>
            </label>
          </div>

          <div class="signature-section">
            <label for="signatureName">Sign Contract — Type Your Full Name *</label>
            <div class="signature-input-wrapper">
              <input type="text" id="signatureName" name="signature" required placeholder="Type your full name to sign">
            </div>
          </div>

          <button type="submit" class="btn-submit">
            Sign & Submit Agreement
            <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
          </button>
        </form>
      </div>

    </div>
  </section>
</BaseLayout>

<script>
  const form = document.getElementById('agreementForm') as HTMLFormElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const submitBtn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    const emailInput = form.querySelector('#buyerEmail') as HTMLInputElement;

    formData.append("replyto", emailInput.value);

    const checkedPuppies = Array.from(form.querySelectorAll('input[name="puppies"]:checked'))
      .map((cb: any) => cb.value)
      .join(', ');
    formData.delete('puppies');
    formData.append('puppies_of_interest', checkedPuppies || 'None selected');

    formData.delete('agree_terms');

    const originalHTML = submitBtn.innerHTML;
    submitBtn.innerHTML = "Submitting...";
    submitBtn.disabled = true;

    try {
      const response = await fetch("https://api.web3forms.com/submit", {
        method: "POST",
        body: formData
      });

      const data = await response.json();

      if (response.ok) {
        window.location.href = "/thank-you";
      } else {
        alert("Error: " + data.message);
      }
    } catch (error) {
      alert("Something went wrong. Please try again.");
    } finally {
      submitBtn.innerHTML = originalHTML;
      submitBtn.disabled = false;
    }
  });
</script>

<style>
  .agreement-section {
    padding: 4rem 1.5rem;
    background: #F0F4F8;
  }

  .agreement-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .agreement-intro {
    text-align: center;
    margin-bottom: 2rem;
  }

  .agreement-intro h2 {
    font-size: 1.75rem;
    font-weight: 700;
    color: #1B2A4A;
    margin: 0 0 0.75rem;
  }

  .agreement-intro p {
    font-size: 1rem;
    color: #555;
    line-height: 1.7;
    max-width: 700px;
    margin: 0 auto;
  }

  .terms-card {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
    margin-bottom: 1.25rem;
    border: 1px solid rgba(27, 42, 74, 0.08);
  }

  .terms-card h3 {
    font-size: 1.15rem;
    font-weight: 700;
    color: #1B2A4A;
    margin: 0 0 1rem;
  }

  .terms-card p {
    font-size: 0.9rem;
    color: #555;
    line-height: 1.7;
    margin: 0 0 0.75rem;
  }

  .term-item {
    font-size: 0.9rem;
    color: #555;
    line-height: 1.7;
    margin-bottom: 0.75rem;
    padding-left: 1rem;
    border-left: 2px solid #E2E8F0;
  }

  .term-item strong {
    color: #333;
  }

  /* Form Card */
  .form-card {
    background: white;
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    margin-top: 2.5rem;
    border: 2px solid rgba(27, 42, 74, 0.12);
  }

  .form-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #E2E8F0;
  }

  .form-header h2 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1B2A4A;
    margin: 0 0 0.5rem;
  }

  .form-header p {
    font-size: 0.95rem;
    color: #666;
    margin: 0;
  }

  .agreement-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-group label {
    font-size: 0.9rem;
    font-weight: 600;
    color: #333;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 0.875rem 1rem;
    border: 2px solid #eee;
    border-radius: 10px;
    font-size: 0.95rem;
    font-family: inherit;
    transition: all 0.3s ease;
    background: #fafafa;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #1B2A4A;
    background: white;
  }

  .radio-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .radio-option {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.9rem;
    color: #444;
    cursor: pointer;
    padding: 0.5rem 0.75rem;
    border-radius: 8px;
    border: 1px solid #eee;
    transition: all 0.2s;
  }

  .radio-option:hover {
    background: #F0F4F8;
    border-color: #2E8B8B;
  }

  .radio-option input[type="radio"] {
    accent-color: #1B2A4A;
  }

  .puppy-checkbox-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
  }

  .puppy-checkbox {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    cursor: pointer;
    font-size: 0.85rem;
    color: #444;
    padding: 0.4rem 0.5rem;
    border-radius: 6px;
    transition: background 0.2s;
  }

  .puppy-checkbox:hover {
    background: #F0F4F8;
  }

  .puppy-checkbox input[type="checkbox"] {
    display: none;
  }

  .checkbox-custom {
    width: 18px;
    height: 18px;
    border: 2px solid #ccc;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s;
  }

  .puppy-checkbox input[type="checkbox"]:checked + .checkbox-custom,
  .agree-checkbox input[type="checkbox"]:checked + .checkbox-custom {
    background: #1B2A4A;
    border-color: #1B2A4A;
  }

  .puppy-checkbox input[type="checkbox"]:checked + .checkbox-custom::after,
  .agree-checkbox input[type="checkbox"]:checked + .checkbox-custom::after {
    content: '';
    width: 5px;
    height: 9px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    margin-top: -2px;
  }

  .checkbox-label {
    font-weight: 500;
  }

  .agreement-check {
    background: #F0F4F8;
    border: 1px solid #2E8B8B;
    border-radius: 10px;
    padding: 1.25rem;
  }

  .agree-checkbox {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
    cursor: pointer;
    font-size: 0.9rem;
    color: #333;
    line-height: 1.5;
  }

  .agree-checkbox input[type="checkbox"] {
    display: none;
  }

  .agree-checkbox .checkbox-custom {
    margin-top: 2px;
  }

  .signature-section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .signature-section label {
    font-size: 0.9rem;
    font-weight: 600;
    color: #333;
  }

  .signature-input-wrapper {
    position: relative;
  }

  .signature-input-wrapper input {
    width: 100%;
    padding: 1.25rem 1rem;
    border: 2px dashed #1B2A4A;
    border-radius: 10px;
    font-size: 1.2rem;
    font-family: 'Georgia', serif;
    font-style: italic;
    color: #333;
    background: #fffdf8;
    background-image: repeating-linear-gradient(
      transparent,
      transparent 38px,
      #e8ddd0 38px,
      #e8ddd0 39px
    );
    transition: all 0.3s ease;
    box-sizing: border-box;
  }

  .signature-input-wrapper input:focus {
    outline: none;
    border-color: #2E8B8B;
    background-color: #fff;
  }

  .signature-input-wrapper input::placeholder {
    font-style: italic;
    color: #bbb;
  }

  .btn-submit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    background: linear-gradient(135deg, #1B2A4A, #2E8B8B);
    color: white;
    padding: 1rem 2rem;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 0.5rem;
  }

  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(27, 42, 74, 0.3);
  }

  .btn-submit:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }

  .btn-submit svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
  }

  @media (max-width: 600px) {
    .agreement-section {
      padding: 2rem 1rem;
    }

    .form-card {
      padding: 1.5rem;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    .puppy-checkbox-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .radio-group {
      flex-direction: column;
    }

    .terms-card {
      padding: 1.5rem;
    }
  }
</style>
